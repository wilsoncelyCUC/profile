---
interface Props {
  caseStudy: {
    title: string;
    slug: string;
    context: string;
    outcome: string;
    metrics?: string[];
    link?: string;
    tags?: string[];
  };
  delay?: number;
}

const { caseStudy, delay = 0 } = Astro.props;
---

<div
  x-data="{ visible: false }"
  x-intersect:enter="visible = true"
  :class="{ 'opacity-100 translate-y-0': visible, 'opacity-0 translate-y-8': !visible }"
  class="bg-bg-light rounded-lg p-6 transition-all duration-700 hover:shadow-xl group border border-primary-light"
  style={`transition-delay: ${delay}ms`}
>
  <h3 class="text-lg font-bold text-text-dark mb-3 group-hover:text-primary transition-colors">
    {caseStudy.title}
  </h3>

  <div class="mb-3">
    <span class="text-xs font-semibold text-primary uppercase tracking-wide">Context</span>
    <p class="text-text-dark/80 mt-1 text-sm">{caseStudy.context}</p>
  </div>

  <div class="mb-4">
    <span class="text-xs font-semibold text-primary uppercase tracking-wide">Outcome</span>
    <p class="text-text-dark/80 mt-1 text-sm">{caseStudy.outcome}</p>
  </div>

  {caseStudy.metrics && caseStudy.metrics.length > 0 && (
    <div class="mb-4">
      <div class="flex flex-wrap gap-2">
        {caseStudy.metrics.map((metric) => (
          <span class="text-xs bg-primary-light text-primary px-2 py-1 rounded">
            {metric}
          </span>
        ))}
      </div>
    </div>
  )}

  {caseStudy.tags && caseStudy.tags.length > 0 && (
    <div class="flex flex-wrap gap-1 mb-4">
      {caseStudy.tags.map((tag) => (
        <span class="text-xs text-text-dark/50">#{tag}</span>
      ))}
    </div>
  )}

  {caseStudy.link && caseStudy.link !== '#' && (
    <a
      href={caseStudy.link}
      class="inline-flex items-center text-primary text-sm font-medium hover:underline"
    >
      Read more
      <svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
      </svg>
    </a>
  )}
</div>
