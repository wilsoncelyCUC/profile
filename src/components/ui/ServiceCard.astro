---
import { resolveBookingUrl, type PillarKey, siteConfig } from '../../data/site-config';

interface Props {
  service: {
    title: string;
    slug: string;
    pillar: PillarKey;
    hook: string;
    tagline: string;
    bestFor: string;
    outcome: string;
    deliverables: string[];
    format: string;
    ctaText: string;
  };
}

const { service } = Astro.props;
const pillarLabel: Record<PillarKey, string> = {
  build: 'Build',
  ship: 'Ship',
  prove: 'Prove',
};

const bookingUrl = new URL(resolveBookingUrl(siteConfig.bookingUrl));
bookingUrl.searchParams.set('service', service.slug);
---

<article class="surface-card flex h-full flex-col p-7 transition-all hover:-translate-y-1 hover:border-cyan-500/40 hover:shadow-glow">
  <div class="mb-4 flex items-center justify-between">
    <span class="rounded-full border border-cyan-500/40 bg-cyan-900/20 px-3 py-1 font-mono text-xs uppercase tracking-wide text-cyan-400">
      {pillarLabel[service.pillar]}
    </span>
  </div>

  <h3 class="text-2xl font-semibold text-white">{service.title}</h3>
  <p class="mt-3 text-base font-medium text-cyan-400">{service.hook}</p>
  <p class="mt-3 text-sm text-slate-300">{service.tagline}</p>

  <div class="mt-6 space-y-4 text-sm">
    <div>
      <p class="font-semibold text-white">Best for</p>
      <p class="mt-1 text-slate-300">{service.bestFor}</p>
    </div>
    <div>
      <p class="font-semibold text-white">Outcome</p>
      <p class="mt-1 text-slate-300">{service.outcome}</p>
    </div>
    <div>
      <p class="font-semibold text-white">What you get</p>
      <ul class="mt-2 space-y-1 text-slate-300">
        {service.deliverables.map((deliverable) => (
          <li class="flex gap-2"><span class="mt-1 h-1.5 w-1.5 rounded-full bg-cyan-400"></span><span>{deliverable}</span></li>
        ))}
      </ul>
    </div>
    <p class="font-medium text-slate-400">Format: {service.format}</p>
  </div>

  <a
    href={bookingUrl.toString()}
    target="_blank"
    rel="noopener noreferrer"
    class="btn-primary mt-8 w-full"
    aria-label={`Request scope for ${service.title}`}
  >
    {service.ctaText}
  </a>
</article>
