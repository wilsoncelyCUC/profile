---
import { getCollection } from 'astro:content';
import { siteConfig } from '../../data/site-config';
import CaseStudyCard_2 from '../ui/CaseStudyCard_2.astro';

const caseStudies = await getCollection('case-studies');
const featuredCaseStudies = caseStudies
  .filter((caseStudy) => caseStudy.data.featured)
  .sort((a, b) => a.data.order - b.data.order)
  .slice(0, 3);

const { proofSection } = siteConfig.valuePageV2;
---

<section id="proof" class="v2-section border-b border-slate-700/30" aria-labelledby="proof-heading">
  <div class="v2-shell">
    <div class="mx-auto max-w-4xl text-center">
      <p class="v2-kicker">Proof</p>
      <h2 id="proof-heading" class="v2-title">{proofSection.title}</h2>
      <p class="v2-lead">{proofSection.subtitle}</p>
    </div>

    <div class="mt-8 v2-grid md:grid-cols-3">
      {proofSection.snapshots.map((snapshot) => (
        <article class="v2-card-soft p-5 text-center">
          <p class="text-3xl font-bold text-sky-200">{snapshot.value}</p>
          <p class="mt-1 text-sm text-slate-200">{snapshot.label}</p>
        </article>
      ))}
    </div>

    <div class="mt-10 v2-grid lg:grid-cols-3">
      {featuredCaseStudies.map((caseStudy) => (
        <CaseStudyCard_2 caseStudy={caseStudy.data} />
      ))}
    </div>
  </div>
</section>
