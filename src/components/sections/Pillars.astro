---
import { siteConfig } from '../../data/site-config';

const [build, ship, prove] = siteConfig.pillars;

const iconPaths: Record<string, string> = {
  build: 'M10.5 6h3m-7.5 6h15m-18 6h21M3 3h18v18H3V3z',
  ship: 'M8 17.5h8M12 2v4m7.071 1.929-2.828 2.828M4.929 8.929l2.828 2.828M4 14h16M5 18h14',
  prove: 'M4 19h16M7 15l3-3 2 2 5-5',
};
---

<section id="pillars" class="section-shell border-b border-navy-800">
  <div class="content-shell">
    <div class="mb-12 text-center">
      <p class="font-mono text-xs uppercase tracking-[0.25em] text-cyan-400">Build · Ship · Prove</p>
      <h2 class="mt-3 text-3xl font-bold sm:text-4xl">From prototype confidence to production value</h2>
    </div>

    <div class="hidden lg:block" x-data="{ active: 'ship' }">
      <div class="relative mx-auto grid max-w-5xl grid-cols-[1fr_auto_1fr] items-end gap-10">
        <div class="surface-card p-6" @mouseenter="active='build'" @focus="active='build'" tabindex="0">
          <div class="flex items-center gap-3">
            <div class="rounded-lg bg-cyan-900/40 p-2 text-cyan-400">
              <svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.75" d={iconPaths.build} /></svg>
            </div>
            <h3 class="text-2xl font-semibold">{build.title}</h3>
          </div>
          <p class="mt-3 text-slate-400">{build.tagline}</p>
          <ul class="mt-4 space-y-2 text-sm text-slate-200">
            {build.bullets.map((bullet) => (
              <li class="flex gap-2"><span class="mt-1 h-2 w-2 rounded-full bg-cyan-400"></span><span>{bullet}</span></li>
            ))}
          </ul>
        </div>

        <div class="pb-10 text-center">
          <div class="mb-4 h-2 w-40 rounded-full bg-gradient-to-r from-cyan-500 to-cyan-400"></div>
          <div class="mx-auto flex h-20 w-20 items-center justify-center rounded-full bg-cyan-500 font-mono text-sm font-bold text-white shadow-glow">YOU</div>
          <div class="mt-4 h-2 w-40 rounded-full bg-gradient-to-r from-cyan-400 to-cyan-500"></div>
        </div>

        <div class="surface-card p-6" @mouseenter="active='prove'" @focus="active='prove'" tabindex="0">
          <div class="flex items-center gap-3">
            <div class="rounded-lg bg-cyan-900/40 p-2 text-cyan-400">
              <svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.75" d={iconPaths.prove} /></svg>
            </div>
            <h3 class="text-2xl font-semibold">{prove.title}</h3>
          </div>
          <p class="mt-3 text-slate-400">{prove.tagline}</p>
          <ul class="mt-4 space-y-2 text-sm text-slate-200">
            {prove.bullets.map((bullet) => (
              <li class="flex gap-2"><span class="mt-1 h-2 w-2 rounded-full bg-cyan-400"></span><span>{bullet}</span></li>
            ))}
          </ul>
        </div>
      </div>

      <div class="mx-auto mt-8 max-w-xl rounded-2xl border border-cyan-500/30 bg-cyan-900/20 p-6 text-center">
        <div class="mb-2 inline-flex items-center gap-2 rounded-full bg-cyan-500/10 px-3 py-1 font-mono text-xs uppercase tracking-wide text-cyan-400">
          <span class="h-1.5 w-1.5 rounded-full bg-cyan-400"></span> Foundation
        </div>
        <h3 class="text-2xl font-semibold">{ship.title}</h3>
        <p class="mt-2 text-slate-300">{ship.tagline}</p>
        <ul class="mt-4 space-y-2 text-left text-sm text-slate-200">
          {ship.bullets.map((bullet) => (
            <li class="flex gap-2"><span class="mt-1 h-2 w-2 rounded-full bg-cyan-400"></span><span>{bullet}</span></li>
          ))}
        </ul>
      </div>
    </div>

    <div class="grid gap-4 lg:hidden">
      {[build, ship, prove].map((pillar) => (
        <article class="surface-card p-5" x-data="{ open: false }">
          <button
            class="flex w-full items-center justify-between text-left"
            @click="open = !open"
            :aria-expanded="open"
          >
            <div>
              <h3 class="text-xl font-semibold">{pillar.title}</h3>
              <p class="mt-1 text-sm text-slate-400">{pillar.tagline}</p>
            </div>
            <svg class="h-5 w-5 text-cyan-400 transition-transform" :class="{ 'rotate-180': open }" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
            </svg>
          </button>
          <ul x-cloak x-show="open" x-transition class="mt-4 space-y-2 text-sm text-slate-200">
            {pillar.bullets.map((bullet) => (
              <li class="flex gap-2"><span class="mt-1 h-2 w-2 rounded-full bg-cyan-400"></span><span>{bullet}</span></li>
            ))}
          </ul>
        </article>
      ))}
    </div>
  </div>
</section>
