---
import { getCollection } from 'astro:content';
import { siteConfig } from '../../data/site-config';
import CaseStudyCard from '../ui/CaseStudyCard.astro';

const caseStudies = await getCollection('case-studies');
const featured = caseStudies
  .filter((study) => study.data.featured)
  .sort((a, b) => a.data.order - b.data.order)
  .slice(0, 3);
---

<section id="proof" class="section-shell border-b border-navy-800">
  <div class="content-shell">
    <div class="mx-auto mb-10 max-w-4xl text-center">
      <p class="font-mono text-xs uppercase tracking-[0.25em] text-cyan-400">Proof</p>
      <h2 class="mt-3 text-3xl font-bold sm:text-4xl">{siteConfig.proof.title}</h2>
      <p class="mt-4 text-lg text-slate-300">{siteConfig.proof.subtitle}</p>
    </div>

    <div class="mb-10 grid gap-4 md:grid-cols-3">
      {siteConfig.proof.stats.map((stat) => (
        <div class="surface-card p-5 text-center">
          <p class="font-mono text-3xl font-bold text-cyan-400">{stat.value}</p>
          <p class="mt-1 text-sm text-slate-400">{stat.label}</p>
        </div>
      ))}
    </div>

    <div class="grid gap-6 lg:grid-cols-3">
      {featured.map((caseStudy) => (
        <CaseStudyCard caseStudy={caseStudy.data} />
      ))}
    </div>

    <div class="mt-10 flex flex-wrap gap-2">
      {siteConfig.proof.capabilityTags.map((tag) => (
        <span class="rounded-full border border-navy-700 bg-navy-800 px-3 py-1.5 text-xs text-slate-300 hover:border-cyan-500/40 hover:text-cyan-400">
          {tag}
        </span>
      ))}
    </div>
  </div>
</section>
